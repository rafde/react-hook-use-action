{"mappings":";;;;;;;AAQA,SAAS,4BAIR,eAAyC,EACzC,IAAkD;IAElD,MAAM,aAAa,IAAI;IACvB,IAAK,OAAO,SAAS,YACpB,OAAO;QACN,GAAG,eAAe;oBAClB;IACD;IAGD,MAAM,UAAU,KAAM,gBAAgB,OAAO;IAC7C,OAAO;QACN,GAAG,eAAe;oBAClB;QACA,SAAS;iBACT;IACD;AACD;AAEe,kDAId,MAAyC,EACzC,OAAsD;IAEtD,MAAM,UAAU,CAAA,GAAA,cAAM,EACrB,IAAM,CAAA,GAAA,yCAAc,EAAG,OAAO,OAAO,GACrC,uDAAuD;IACvD,EACC;IAEF,MAAM,OAAO,CAAA,GAAA,cAAM,EAClB,IAAQ,CAAA;YACP,SAAS;YACT,sFAAsF;YACtF,YAAY;YACZ,SAAS,OAAO,OAAO;YACvB,SAAS,OAAO,OAAO;YACvB,UAAU;YACV,iBAAiB;QAClB,CAAA,GACA,uDAAuD;IACvD,EACC;IAEF,MAAM,kBAAkB,CAAA,GAAA,kBAAU,EACjC,CACC,iBACA,eACI,CAAA,GAAA,wCAAS,EAAG;qBAChB;qBACA;6BACA;0BACA;YACA,mBAAmB,OAAO,iBAAiB;QAC5C,IACA,uDAAuD;IACvD,EAAE;IAGH,MAAM,SAAS,CAAA,GAAA,kBAAU,EACxB,CAAE,kBAAgD,4BAAyB,iBAAiB,OAAO,MAAM,GACzG,uDAAuD;IACvD,EAAE;IAGH,OAAO,CAAA,GAAA,iBAAS,EACf,iBACA,MACA;AAEF","sources":["src/internal/usePrivateCTA.ts"],"sourcesContent":["import { useCallback, useMemo, useReducer, } from 'react';\nimport { compareCallback, } from './compareCallback';\n\nimport ctaReducer, { CTAReducerState, } from './ctaReducer';\n\nimport type { CTAState, } from '../types/CTAState';\nimport type { UseCTAParameter, } from '../types/UseCTAParameter';\n\nfunction _init<\n\tInitial extends CTAState,\n\tActions,\n>(\n\tprivateCTAState: CTAReducerState<Initial>,\n\tinit?: UseCTAParameter<Initial, Actions>['onInit'],\n): CTAReducerState<Initial> {\n\tconst changesMap = new Map() as CTAReducerState<Initial>['changesMap'];\n\tif ( typeof init !== 'function' ) {\n\t\treturn {\n\t\t\t...privateCTAState,\n\t\t\tchangesMap,\n\t\t};\n\t}\n\n\tconst initial = init( privateCTAState.current, );\n\treturn {\n\t\t...privateCTAState,\n\t\tchangesMap,\n\t\tcurrent: initial,\n\t\tinitial,\n\t};\n}\n\nexport default function usePrivateCTA<\n\tInitial extends CTAState,\n\tActions,\n>(\n\tparams: UseCTAParameter<Initial, Actions>,\n\tactions?: UseCTAParameter<Initial, Actions>['actions'],\n) {\n\tconst compare = useMemo(\n\t\t() => compareCallback( params.compare, ),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[\n\t\t],\n\t);\n\tconst init = useMemo(\n\t\t() => ( {\n\t\t\tchanges: null,\n\t\t\t// Set changesMap in init to avoid re-instantiating a new Map everytime this is called\n\t\t\tchangesMap: undefined as unknown as CTAReducerState<Initial>['changesMap'],\n\t\t\tcurrent: params.initial,\n\t\t\tinitial: params.initial,\n\t\t\tprevious: null,\n\t\t\tpreviousInitial: null,\n\t\t} ),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[\n\t\t],\n\t);\n\tconst reducerCallback = useCallback(\n\t\t(\n\t\t\tctaReducerState: CTAReducerState<Initial>,\n\t\t\tnextCTAProps: Parameters<typeof ctaReducer<Initial, Actions>>[0]['nextCTAProps'],\n\t\t) => ctaReducer( {\n\t\t\tactions,\n\t\t\tcompare,\n\t\t\tctaReducerState,\n\t\t\tnextCTAProps,\n\t\t\tafterActionChange: params.afterActionChange,\n\t\t}, ),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[],\n\t);\n\n\tconst onInit = useCallback(\n\t\t( privateCTAState: CTAReducerState<Initial>, ) => _init<Initial, Actions>( privateCTAState, params.onInit, ),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[],\n\t);\n\n\treturn useReducer(\n\t\treducerCallback,\n\t\tinit,\n\t\tonInit,\n\t);\n}\n\nexport type UsePrivateCTAReturnType<\n\tInitial extends CTAState,\n\tActions,\n> = ReturnType<typeof usePrivateCTA<Initial, Actions>>;\n"],"names":[],"version":3,"file":"usePrivateCTA.42245cc6.js.map"}