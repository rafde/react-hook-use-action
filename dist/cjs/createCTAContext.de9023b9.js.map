{"mappings":";;;;;;;;;;;AAWO,SAAS,0CAIb,aAAgD;IAKlD,MAAM,oBAAoB,CAAA,GAAA,0BAAY,EAA0C;QAC/E,SAAS;QACT,SAAS,cAAc,OAAO;QAC9B,SAAS,cAAc,OAAO;QAC9B,UAAU;QACV,iBAAiB;IAClB;IACA,MAAM,qBAAqB,CAAA,GAAA,0BAAY,EAAuD;IAE9F,OAAO;QACN,aAAa,KAAkH;YAC9H,MAAM,WACL,UAAU,cAAc,OAAO,UAC/B,SAAS,cAAc,MAAM,WAC7B,UAAU,cAAc,OAAO,EAC/B,GAAG;YACJ,MAAM,CACL,OACA,SACA,GAAG,CAAA,GAAA,gCAAK,EAAG;yBACX;wBACA;gBACA,SAAS,cAAc,OAAO;yBAC9B;YACD;YAEA,OAAO,CAAA,GAAA,0BAAY,EAAG,kBAAkB,QAAQ,EAAE;uBACjD;gBACA,UAAU,CAAA,GAAA,0BAAY,EAAG,mBAAmB,QAAQ,EAAE;oBACrD,OAAO;oBACP,UAAU,MAAM,QAAQ;gBACzB;YACD;QACD;QACA;YACC,OAAO,CAAA,GAAA,uBAAS,EAAG;QACpB;QACA;YACC,MAAM,qBAAqB,CAAA,GAAA,uBAAS,EAAG;YACvC,IAAK,sBAAsB,MAAO;gBACjC,QAAQ,KAAK,CAAE;gBACf,OAAO;YACR;YAEA,OAAO;QACR;IACD;AACD","sources":["src/internal/createCTAContext.ts"],"sourcesContent":["import React, { createContext, useContext, createElement, } from 'react';\nimport type { CTAState, } from '../types/CTAState';\nimport { DefaultActionsRecord, } from '../types/DefaultActionsRecord';\nimport type { UseCTAParameter, } from '../types/UseCTAParameter';\nimport { ActionsRecordProp, UseCTAParameterActionsRecordProp, } from '../types/UseCTAParameterActionsRecordProp';\nimport { UseCTAReturnType, } from '../types/UseCTAReturnType';\nimport { useCTA, } from './useCTA';\n\n/**\n * https://react.dev/learn/scaling-up-with-reducer-and-context#moving-all-wiring-into-a-single-file\n */\nexport function createCTAContext<\n\tInitial extends CTAState,\n\tActions extends UseCTAParameterActionsRecordProp<Initial> | undefined,\n\tActionsRecord = Actions extends Partial<DefaultActionsRecord<Initial>> ? ActionsRecordProp<Initial, Actions> : Actions,\n>( contextParams: UseCTAParameter<Initial, Actions>, ): {\n\tCTAProvider: React.FC<React.PropsWithChildren<Partial<Pick<UseCTAParameter<Initial, Actions>, 'initial' | 'onInit' | 'compare'>>>>\n\tuseCTAHistoryContext: () => UseCTAReturnType<Initial, Actions>[0]\n\tuseCTADispatchContext: () => UseCTAReturnType<Initial, ActionsRecord>[1] | null\n} {\n\tconst CTAContextHistory = createContext<UseCTAReturnType<Initial, Actions>[0]>( {\n\t\tchanges: null,\n\t\tcurrent: contextParams.initial,\n\t\tinitial: contextParams.initial,\n\t\tprevious: null,\n\t\tpreviousInitial: null,\n\t}, );\n\tconst CTAContextDispatch = createContext<UseCTAReturnType<Initial, ActionsRecord>[1] | null>( null, );\n\n\treturn {\n\t\tCTAProvider( props: React.PropsWithChildren<Partial<Pick<UseCTAParameter<Initial, Actions>, 'initial' | 'onInit' | 'compare'>>>, ) {\n\t\t\tconst {\n\t\t\t\tinitial = contextParams.initial,\n\t\t\t\tonInit = contextParams.onInit,\n\t\t\t\tcompare = contextParams.compare,\n\t\t\t} = props;\n\t\t\tconst [\n\t\t\t\tvalue,\n\t\t\t\tdispatch,\n\t\t\t] = useCTA( {\n\t\t\t\tinitial,\n\t\t\t\tonInit,\n\t\t\t\tactions: contextParams.actions,\n\t\t\t\tcompare,\n\t\t\t}, );\n\n\t\t\treturn createElement( CTAContextHistory.Provider, {\n\t\t\t\tvalue,\n\t\t\t\tchildren: createElement( CTAContextDispatch.Provider, {\n\t\t\t\t\tvalue: dispatch as unknown as UseCTAReturnType<Initial, ActionsRecord>[1],\n\t\t\t\t\tchildren: props.children,\n\t\t\t\t}, ),\n\t\t\t}, );\n\t\t},\n\t\tuseCTAHistoryContext() {\n\t\t\treturn useContext( CTAContextHistory, );\n\t\t},\n\t\tuseCTADispatchContext() {\n\t\t\tconst ctaDispatchContext = useContext( CTAContextDispatch, );\n\t\t\tif ( ctaDispatchContext == null ) {\n\t\t\t\tconsole.error( 'useCTADispatchContext was called outside it\\'s Provider', );\n\t\t\t\treturn ctaDispatchContext satisfies null;\n\t\t\t}\n\n\t\t\treturn ctaDispatchContext satisfies UseCTAReturnType<Initial, ActionsRecord>[1];\n\t\t},\n\t};\n}\n"],"names":[],"version":3,"file":"createCTAContext.de9023b9.js.map"}