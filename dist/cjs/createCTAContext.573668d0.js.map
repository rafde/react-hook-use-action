{"mappings":";;;;;;;;;;;;;AAWO,SAAS,0CAIb,aAAgD;IAClD,MAAM,gCAAkB,CAAA,GAAA,0BAAY,EAA0C;QAC7E,SAAS;QACT,SAAS,cAAc,OAAO;QAC9B,SAAS,cAAc,OAAO;QAC9B,UAAU;QACV,iBAAiB;IAClB;IACA,MAAM,mCAAqB,CAAA,GAAA,0BAAY,EAAuD;IAE9F,OAAO;QACN,aAAa,KAAsG;YAClH,MAAM,WACL,UAAU,cAAc,OAAO,UAC/B,SAAS,cAAc,MAAM,EAC7B,GAAG;YACJ,MAAM,CACL,OACA,WACA,GAAG,CAAA,GAAA,gCAAK,EAAG;yBACX;wBACA;gBACA,SAAS,cAAc,OAAO;gBAC9B,SAAS,cAAc,OAAO;YAC/B;YACA,qBAAO,gCAAC,gBAAgB,QAAQ;gBAAC,OAAO;0BACvC,cAAA,gCAAC,mBAAmB,QAAQ;oBAAC,OAAO;8BAClC,MAAM,QAAQ;;;QAGlB;QACA;YACC,OAAO,CAAA,GAAA,uBAAS,EAAG;QACpB;QACA;YACC,MAAM,qBAAqB,CAAA,GAAA,uBAAS,EAAG;YACvC,IAAK,sBAAsB,MAAO;gBACjC,QAAQ,KAAK,CAAE;gBACf,OAAO;YACR;YAEA,OAAO;QACR;IACD;AACD","sources":["src/internal/createCTAContext.tsx"],"sourcesContent":["import React, { createContext, useContext, } from 'react';\nimport type { CTAInitial, } from '../types/CTAInitial';\nimport { DefaultActionsRecord, } from '../types/DefaultActionsRecord';\nimport type { UseCTAParameter, } from '../types/UseCTAParameter';\nimport { ActionsRecordProp, UseCTAParameterActionsRecordProp, } from '../types/UseCTAParameterActionsRecordProp';\nimport { UseCTAReturnType, } from '../types/UseCTAReturnType';\nimport { useCTA, } from './useCTA';\n\n/**\n * https://react.dev/learn/scaling-up-with-reducer-and-context#moving-all-wiring-into-a-single-file\n */\nexport function createCTAContext<\n\tInitial extends CTAInitial,\n\tActions extends UseCTAParameterActionsRecordProp<Initial> | undefined,\n\tActionsRecord = Actions extends Partial<DefaultActionsRecord<Initial>> ? ActionsRecordProp<Initial, Actions> : Actions,\n>( contextParams: UseCTAParameter<Initial, Actions>, ) {\n\tconst CTAContextState = createContext<UseCTAReturnType<Initial, Actions>[0]>( {\n\t\tchanges: null,\n\t\tcurrent: contextParams.initial,\n\t\tinitial: contextParams.initial,\n\t\tprevious: null,\n\t\tpreviousInitial: null,\n\t}, );\n\tconst CTAContextDispatch = createContext<UseCTAReturnType<Initial, ActionsRecord>[1] | null>( null, );\n\n\treturn {\n\t\tCTAProvider( props: React.PropsWithChildren<Partial<Pick<UseCTAParameter<Initial, Actions>, 'initial' | 'onInit'>>>, ) {\n\t\t\tconst {\n\t\t\t\tinitial = contextParams.initial,\n\t\t\t\tonInit = contextParams.onInit,\n\t\t\t} = props;\n\t\t\tconst [\n\t\t\t\tstate,\n\t\t\t\tdispatcher,\n\t\t\t] = useCTA( {\n\t\t\t\tinitial,\n\t\t\t\tonInit,\n\t\t\t\tactions: contextParams.actions,\n\t\t\t\tcompare: contextParams.compare,\n\t\t\t}, );\n\t\t\treturn <CTAContextState.Provider value={state}>\n\t\t\t\t<CTAContextDispatch.Provider value={dispatcher as unknown as UseCTAReturnType<Initial, ActionsRecord>[1]}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</CTAContextDispatch.Provider>\n\t\t\t</CTAContextState.Provider>;\n\t\t},\n\t\tuseCTAStateContext() {\n\t\t\treturn useContext( CTAContextState, );\n\t\t},\n\t\tuseCTADispatchContext() {\n\t\t\tconst ctaDispatchContext = useContext( CTAContextDispatch, );\n\t\t\tif ( ctaDispatchContext == null ) {\n\t\t\t\tconsole.error( 'useCTADispatchContext was called outside it\\'s Provider', );\n\t\t\t\treturn ctaDispatchContext satisfies null;\n\t\t\t}\n\n\t\t\treturn ctaDispatchContext satisfies UseCTAReturnType<Initial, ActionsRecord>[1];\n\t\t},\n\t};\n}\n"],"names":[],"version":3,"file":"createCTAContext.573668d0.js.map"}